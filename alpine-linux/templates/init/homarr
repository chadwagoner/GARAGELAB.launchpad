#!/sbin/openrc-run

name="homarr"
description="container - homarr"

restart_command="/usr/bin/docker compose -f /opt/core-services/homarr/compose.yaml restart"
start_command="/usr/bin/docker compose -f /opt/core-services/homarr/compose.yaml up -d"
stop_command="/usr/bin/docker compose -f /opt/core-services/homarr/compose.yaml down"
stop_command_args="--rmi all --volumes"

depend() {
        need container_id
        use docker tailscale
}

start_pre() {
        sleep 30
}

start() {
        ebegin "STARTING - $name"
        ${start_command}
        eend $?
}

stop() {
        ebegin "STOPPING - $name"
        ${stop_command} ${stop_command_args}
        eend $?
}

restart() {
        ebegin "RESTARTING - $name"
        ${restart_command}
        eend $?
}
